<!DOCTYPE html>
<html>
  <head>
    
    <link href="style.css" type="text/css" rel="stylesheet" >
   <script>
     var API_KEY = "1eb0ccf89bbb379a3905a8df22bb438a";
     var APP_ID = "36bbd38c";
     
    function textSummarize(text, headline) {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        
        if (this.readyState == 4 && this.status == 200) {
          console.log(this.responseText);
        }
      };
          xhttp.open("GET", "https://api.aylien.com/api/v1/summarize?title=" + headline +  "&text=" + text + "&sentences_number=3")
          xhttp.setRequestHeader("X-AYLIEN-TextAPI-Application-Key", API_KEY);
          xhttp.setRequestHeader("X-AYLIEN-TextAPI-Application-ID", APP_ID);
          xhttp.send();
      
    }
     
    function loadXMLDoc() {
      var xhttp = new XMLHttpRequest();
      
      xhttp.onreadystatechange = function() {
        
        if (this.readyState == 4 && this.status == 200) {
          var headline, category, date, bodyText;
          var resp = JSON.parse(this.responseText);
          var count = resp.response.results.length;
          var news = document.getElementById("news");
    
          for(var i = 0; i < count; i++) {
            headline = resp.response.results[i].webTitle;
            category = resp.response.results[i].sectionName;
            date = resp.response.results[i].webPublicationDate;
            bodyText = resp.response.results[i].fields.bodyText;
            
         textSummarize(bodyText, headline);
            
            var article = document.createElement("div");
            var lineBreak = document.createElement("br");
            var h = document.createElement("p");
            var c = document.createElement("p");
            var d = document.createElement("p");
            var url = document.createElement("p");
         
            h.setAttribute("class", "headline");
            c.setAttribute("class", "category");
            d.setAttribute("class", "date");
         
            h.innerHTML = headline;
            c.innerHTML = category;
            d.innerHTML = new Date(date).toUTCString();
         
            news.appendChild(article); 
            article.appendChild(h);
            article.appendChild(c);
            article.appendChild(d);
            article.appendChild(lineBreak);

          }
        }
      };
      
      xhttp.open("GET", "http://content.guardianapis.com/search?show-fields=bodyText&api-key=fe308324-ad4f-4317-a3df-7329ed2b238b", true);
      xhttp.send();
    }
   
    </script>
  
  </head>
<body onload="loadXMLDoc()">

<h2>News</h2>

<div id="news">


  
</div>
  
  
</body>
</html>