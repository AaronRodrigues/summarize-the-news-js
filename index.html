<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>The amazing news summary page</title>
    <script src="https://rawgit.com/rogrenke/testFramework-js/master/helpers.js" type="text/javascript"></script>

    <link href="style.css" type="text/css" rel="stylesheet" >
   <script>


    function loadXMLDoc(callback) {
      var xhttp = new XMLHttpRequest();

      xhttp.onreadystatechange = function() {

        if (this.readyState == 4 && this.status == 200) {
          var headline, category, date, bodyText;
          var resp = JSON.parse(this.responseText);
          var count = resp.response.results.length;
          var news = document.getElementById("news");

          for(var i = 0; i < count; i++) {
            headline = resp.response.results[i].webTitle;
            category = resp.response.results[i].sectionName;
            date = resp.response.results[i].webPublicationDate;
            // replace the string below with the summary string from Aylien
            summary = "This is a placeholder text for the awesome summary!"

            bodyText = resp.response.results[i].fields.bodyText;

            var article = document.createElement("article");
            var textContent = document.createElement("details");
            var lineBreak = document.createElement("br");
            var h = document.createElement("summary");
            var c = document.createElement("p");
            var s = document.createElement("p");
            // var d = document.createElement("p");

            h.setAttribute("class", "headline");
            c.setAttribute("class", "category");
            article.setAttribute("class", "article")
            // d.setAttribute("class", "date");

            h.innerHTML = headline;
            c.innerHTML = category + " - " + new Date(date).toUTCString();
            s.innerHTML = summary;
            // d.innerHTML = ""

            news.appendChild(article);
            article.appendChild(c);
            article.appendChild(textContent);
            // news.appendChild(d);
            textContent.appendChild(h);
            textContent.appendChild(s);
            news.appendChild(lineBreak);

          }
          callback();
        }
      };

      xhttp.open("GET", "http://content.guardianapis.com/search?show-fields=bodyText&api-key=fe308324-ad4f-4317-a3df-7329ed2b238b", true);
      xhttp.send();

    }

    </script>

</head>
<body onload="loadXMLDoc(executeTests)">



  <h1 id="header">See the latest news!</h1>
  <div id="news">
    <!-- <p>date - category</p>
    <details>
      <summary class="headline">Hello Test</summary>
      <p>this is the very very very very long text</p>
    </details> -->
  </div>

  <script src="test/featureTest.js" type="text/javascript"></script>



</body>
</html>
